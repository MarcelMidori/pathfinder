<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pathfinder: Graph Theory Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <h1>Pathfinder: Graph Theory</h1>
    
    <div class="controls">
        <button onclick="generateGraph()">New Graph</button>
        <button class="secondary" onclick="resetProgress()">Reset Path</button>
        <button class="secondary" id="algoBtn" onclick="runDijkstraAnimation()">Visualize Dijkstra</button>
        <button class="secondary" id="raceBtn" onclick="toggleRaceMode()">Race Mode</button>
        <button class="secondary" id="algoRaceBtn" onclick="toggleAlgorithmRaceMode()">Algorithm Race</button>
    </div>

    <div class="stats">
        <div class="stat-box">Target Distance: <span id="targetDist" class="val">?</span></div>
        <div class="stat-box">Your Distance: <span id="currentDist" class="val">0</span></div>
        <div class="stat-box">Status: <span id="statusMsg" style="color:#aaa">Select neighbors to move.</span></div>
    </div>

    <!-- Race mode stats -->
    <div class="race-stats" id="raceStats" style="display: none;">
        <div class="race-section">
            <h3>You</h3>
            <div class="stat-box">Distance: <span id="raceUserDist" class="val">0</span></div>
            <div class="stat-box">Time: <span id="raceUserTime" class="val">0.0s</span></div>
        </div>
        <div class="race-section">
            <h3>Algorithm</h3>
            <div class="stat-box">Distance: <span id="raceAlgoDist" class="val">?</span></div>
            <div class="stat-box">Time: <span id="raceAlgoTime" class="val">?</span></div>
        </div>
        <div class="race-section">
            <h3>Difficulty</h3>
            <div class="difficulty-selector">
                <button class="difficulty-btn active" data-difficulty="easy" onclick="setRaceDifficulty('easy')">Easy</button>
                <button class="difficulty-btn" data-difficulty="medium" onclick="setRaceDifficulty('medium')">Medium</button>
                <button class="difficulty-btn" data-difficulty="hard" onclick="setRaceDifficulty('hard')">Hard</button>
            </div>
            <button id="startRaceBtn" class="start-race-btn" onclick="startRaceFromButton()">Start Race</button>
        </div>
        <div class="race-section" id="raceResultSection" style="display: none;">
            <h3 id="raceResultTitle"></h3>
            <p id="raceResultMessage" style="margin: 8px 0; color: #eee; font-size: 0.9rem;"></p>
        </div>
    </div>

    <!-- Algorithm race mode stats -->
    <div class="race-stats" id="algoRaceStats" style="display: none;">
        <div class="race-section">
            <h3>Algorithm 1</h3>
            <select id="algo1Select" class="algo-select" onchange="setAlgorithm1(this.value)">
                <option value="dijkstra">Dijkstra</option>
                <option value="astar">A*</option>
                <option value="bfs">BFS</option>
                <option value="dfs">DFS</option>
                <option value="greedy">Greedy</option>
            </select>
            <div class="stat-box">Distance: <span id="algo1Dist" class="val">?</span></div>
            <div class="stat-box">Time: <span id="algo1Time" class="val">?</span></div>
        </div>
        <div class="race-section">
            <h3>Algorithm 2</h3>
            <select id="algo2Select" class="algo-select" onchange="setAlgorithm2(this.value)">
                <option value="dijkstra">Dijkstra</option>
                <option value="astar" selected>A*</option>
                <option value="bfs">BFS</option>
                <option value="dfs">DFS</option>
                <option value="greedy">Greedy</option>
            </select>
            <div class="stat-box">Distance: <span id="algo2Dist" class="val">?</span></div>
            <div class="stat-box">Time: <span id="algo2Time" class="val">?</span></div>
        </div>
        <div class="race-section">
            <h3>Execution Mode</h3>
            <div class="execution-mode-selector">
                <button class="execution-mode-btn active" data-mode="simultaneous" onclick="setExecutionMode('simultaneous')">Simultaneous</button>
                <button class="execution-mode-btn" data-mode="sequential" onclick="setExecutionMode('sequential')">Sequential</button>
            </div>
            <button id="startAlgoRaceBtn" class="start-race-btn" onclick="startAlgorithmRaceFromButton()">Start Race</button>
        </div>
        <div class="race-section" id="algoRaceResultSection" style="display: none;">
            <h3 id="algoRaceResultTitle"></h3>
            <p id="algoRaceResultMessage" style="margin: 8px 0; color: #eee; font-size: 0.9rem;"></p>
        </div>
    </div>

    <br>
    <div id="canvasContainer">
        <div class="canvas-section">
            <h3 id="userCanvasLabel">Your Path</h3>
            <canvas id="gameCanvas" width="800" height="500"></canvas>
        </div>
        <div class="canvas-section" id="raceCanvasSection" style="display: none;">
            <h3>Algorithm</h3>
            <canvas id="raceCanvas" width="800" height="500"></canvas>
        </div>
        <div class="canvas-section" id="algo1CanvasSection" style="display: none;">
            <h3 id="algo1CanvasLabel">Algorithm 1</h3>
            <canvas id="algo1Canvas" width="800" height="500"></canvas>
        </div>
        <div class="canvas-section" id="algo2CanvasSection" style="display: none;">
            <h3 id="algo2CanvasLabel">Algorithm 2</h3>
            <canvas id="algo2Canvas" width="800" height="500"></canvas>
        </div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>
</html>